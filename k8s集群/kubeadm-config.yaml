apiVersion: kubeadm.k8s.io/v1beta3
kind: InitConfiguration
localAPIEndpoint:
  advertiseAddress: "192.168.87.131"    # 修改为你的 master IP
  bindPort: 6443
nodeRegistration:
  criSocket: "unix:///var/run/containerd/containerd.sock"  # 明确指定 CRI
---
apiVersion: kubeadm.k8s.io/v1beta3
kind: ClusterConfiguration
kubernetesVersion: "v1.28.0"
imageRepository: "registry.aliyuncs.com/google_containers"  # 国内镜像
controlPlaneEndpoint: "192.168.87.131:6443"  # 修改为你的 master IP
networking:
  serviceSubnet: "10.96.0.0/12"
  podSubnet: "10.244.0.0/16"  # 与 Calico 默认 CIDR 匹配
  dnsDomain: "cluster.local"
apiServer:
  timeoutForControlPlane: 4m0s
controllerManager:
  extraArgs:
    bind-address: 0.0.0.0
scheduler:
  extraArgs:
    bind-address: 0.0.0.0